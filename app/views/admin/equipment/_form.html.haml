.wrapper.wrapper-content.animated.fadeInRight
  .row
    .col-lg-12
      .ibox.float-e-margins
        .ibox-title
          %h5
            Veuillez remplir toutes les informations concernant votre matériel
        .ibox-content
          = form_for [:admin, @equipment], validate: true, html: {class: 'form-horizontal'} do |equipment_form|
            .form-group
              %label.col-sm-2.control-label Nom
              .col-sm-10
                = equipment_form.text_field :name, class: 'form-control bg-contrast'
            .hr-line-dashed
            .form-group
              %label.col-sm-2.control-label Description
              .col-sm-10
                = equipment_form.text_area :description, class: 'form-control bg-contrast'
            .hr-line-dashed
            .form-group
              %label.col-sm-2.control-label Prix/unité (en €)
              .col-sm-10
                = equipment_form.text_field :unit_price, class: 'form-control bg-contrast'
            .hr-line-dashed

            .form-group
            .search-container
              .search-input
                %label.control-label Catégorie
                %input.form-control.bg-contrast{id: 'search-input-Category', 'data-model': 'Category', type: 'text', placeholder: 'Chercher par nom'}
              = equipment_form.hidden_field :category_id, id: 'list-Category_ids'
              .search-results
                - Category.all.each do |c|
                  %p.result-item.result-item-Category.hidden{id: "Category-#{c[:id]}"}
                    = c[:name]
              .search-chosen#search-chosen-Category
                - if @equipment[:category_id].present?
                  .item-selected{id: "for-Category-#{@equipment[:category_id]}"}
                    %div
                      = @equipment.category[:name]

            .hr-line-dashed
            .form-group
            .search-container
              .search-input
                %label.control-label Fournisseur
                %input.form-control.bg-contrast{id: 'search-input-Supplier', 'data-model': 'Supplier', type: 'text', placeholder: 'Chercher par entreprise, nom contact'}
              = equipment_form.hidden_field :supplier_id, id: 'list-Supplier_ids'
              .search-results
                - Supplier.all.each do |s|
                  %p.result-item.result-item-Supplier.hidden{id: "Supplier-#{s[:id]}"}
                    = s[:name]
                    %br
                    = "(#{s.contact.full_name})"
              .search-chosen#search-chosen-Supplier
                - if @equipment[:supplier_id].present?
                  .item-selected{id: "for-Supplier-#{@equipment[:supplier_id]}"}
                    %div
                      = @equipment.supplier[:name]
                      %br
                      = "(#{@equipment.supplier.contact.full_name})"

            %br
            %fieldset
              %legend Dimensions du matériel
              = equipment_form.fields_for :dimension, @equipment.dimension.present? ? @equipment.dimension : @equipment.build_dimension  do |dimension_form|
                .form-group
                  %label.col-sm-2.control-label Largeur (en cm)
                  .col-sm-10
                    = dimension_form.text_field :width, class: 'form-control bg-contrast'
                .form-group
                  %label.col-sm-2.control-label Longeur (en cm)
                  .col-sm-10
                    = dimension_form.text_field :length, class: 'form-control bg-contrast'
                .form-group
                  %label.col-sm-2.control-label Hauteur (en cm)
                  .col-sm-10
                    = dimension_form.text_field :height, class: 'form-control bg-contrast'
                .form-group
                  %label.col-sm-2.control-label Poids (en g)
                  .col-sm-10
                    = dimension_form.text_field :weight, class: 'form-control bg-contrast'

            %br
            .form-group
              .col-sm-4
                %button.btn.btn-primary{:type => 'submit'} Sauver le matériel
