.row.wrapper.border-bottom.white-bg.page-heading
  .col-lg-10
    %h2 Evènements
    %ol.breadcrumb
      %li
        %a{:href => admin_root_path} Accueil
      %li
        - if event_to_come
          %a{:href => admin_events_path} Evènements
        - else
          %a{:href => admin_events_path(events: 'previous')} Evènements
      %li.active
        %strong
          = @event.name

= form_tag admin_import_event_registrations_path, method: :post, multipart: true do
  %fieldset{style: 'margin-top: 20px'}
    %legend Importer des réservations
    = hidden_field_tag :id, value: "#{@event[:id]}"
    = file_field_tag :file
    = submit_tag 'Importer', class: 'btn btn-success mt-20'

%table.table.table-borderless{style: 'margin-top: 50px; max-width: 700px'}
  %tbody
    %tr
      %th Nom :
      %td
        = @event[:name]
    %tr
      %th Date de début :
      %td
        = date_time_to_french_format(@event[:start_date])
    %tr
      %th Date de fin :
      %td
        = date_time_to_french_format(@event[:end_date])
    %tr
      %th Clôture des inscriptions :
      %td
        = date_time_to_french_format(@event[:registration_deadline])
    %tr
      %th Min. participant :
      %td
        = @event[:min_participant]
    %tr
      %th Max. participant :
      %td
        = @event[:max_participant]
    %tr
      %th Activités :
      - if @event.event_activities.present?
        %td
          - @event.event_activities.each do |ev_ac|
            = "#{ev_ac.activity.name} (#{ev_ac.simultaneous_activities})"
            %br
    %tr
      %th Matériel :
      - if @event.event_equipment.present?
        %td
          - @event.event_equipment.each do |equipment|
            = "#{equipment.equipment[:name]} (#{equipment[:quantity].to_i})"
            %br
    %tr
      %th Lieu :
      %td
        = @event.location[:name]
    %tr
      %th Contact :
      %td
        = "Nom : #{@event.contact[:lastname]}"
        %br
        = "Prénom : #{@event.contact[:firstname]}"
        %br
        = "Téléphone : #{@event.contact[:phone_number]}"
        %br
        = "Email : #{@event.contact[:email]}"
        %br
    %tr
      %th Prix :
      %td
        = "#{to_french_repr(@event[:price])} €"
    %tr
      %th Réservations :
      - if @event.registrations.present?
        %td
          - @event.registrations.each do |r|
            = "#{r.user.contact.full_name} (#{r.user[:email]}) -- #{r[:price]}€"
            %br

.row.text-center
  %button.btn.btn-secondary.btn-lg{:type => 'button'}
    = link_to 'Modifier', edit_admin_event_path(@event.id)
  %button.btn.btn-danger.btn-lg{:type => 'button'}
    = link_to 'Supprimer', admin_event_path(@event.id), method: :delete, data: { confirm: "Êtes-vous sur de vouloir supprimer cet évènement ?" }
